(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6deb"],{"5b52":function(t,e,a){"use strict";var o=a("d4eb"),i=a.n(o);i.a},6763:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"category"}},[a("transition",{attrs:{appear:"","appear-active-class":"animated fadeInLeft"}},[a("div",{staticClass:"category"},[a("AddCategory",{attrs:{list:t.category_top},on:{up_parent:t.up_list}}),a("el-dialog",{attrs:{title:"",visible:t.editbox,width:"35%",center:""},on:{"update:visible":function(e){t.editbox=e}}},[a("el-form",{attrs:{model:t.editform}},[a("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"商品分类名称","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editform.category_name,callback:function(e){t.$set(t.editform,"category_name",e)},expression:"editform.category_name"}})],1),a("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"商品分类简称","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editform.short_name,callback:function(e){t.$set(t.editform,"short_name",e)},expression:"editform.short_name"}})],1),a("el-form-item",{attrs:{label:"上级分类","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择分类"},model:{value:t.editform.pid,callback:function(e){t.$set(t.editform,"pid",e)},expression:"editform.pid"}},[a("el-option",{attrs:{label:"顶级分类",value:"0"}}),t._l(t.category_top,function(t){return a("el-option",{attrs:{value:t.category_id,label:t.category_name}})})],2)],1),a("el-upload",{staticClass:"upload-demo",attrs:{action:t.upfile_url,data:t.upfile_data,"on-success":t.up_ok,headers:t.upfile_head}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editbox=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.onSubmit(t.editindex)}}},[t._v("确 定")])],1)],1),[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.category,border:""}},[a("el-table-column",{attrs:{prop:"",label:"排序",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{staticStyle:{"font-size":"12px"},attrs:{placeholder:""},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})]}}])}),a("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"category_name",label:"分类名字",width:"280"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.line?a("span",[t._v("  |——")]):t._e(),t._v(t._s(e.row.category_name)+"\n\t\t\t\t\t\t")]}}])}),a("el-table-column",{attrs:{prop:"short_name",label:"商品分类简称",width:"180"}}),a("el-table-column",{attrs:{prop:"imgs",label:"缩略图",width:"150"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.row.imgs,width:"40",height:"40"}})]}}])}),a("el-table-column",{attrs:{prop:"pid",label:"Pid",width:"150"}}),a("el-table-column",{attrs:{prop:"is_visible",label:"是否显示",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#DCDFE6"},on:{change:function(a){t.onswitch(e.row.category_id)}},model:{value:e.row.is_visible,callback:function(a){t.$set(e.row,"is_visible",a)},expression:"scope.row.is_visible"}})]}}])}),a("el-table-column",{attrs:{prop:"level",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){t.onedit(e.$index)}}},[t._v("修改")]),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.del(e.row.category_id,e.$index)}}},[t._v("删除")])]}}])})],1)]],2)])],1)},i=[],l=(a("5c96"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"btn"},[a("el-row",[a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(e){t.addbox=!0}}},[t._v("添加商品分类")])],1),a("el-dialog",{attrs:{title:"",visible:t.addbox,width:"35%",center:""},on:{"update:visible":function(e){t.addbox=e}}},[a("el-form",{attrs:{model:t.addform}},[a("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"商品分类名称","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.addform.category_name,callback:function(e){t.$set(t.addform,"category_name",e)},expression:"addform.category_name"}})],1),a("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"商品分类简称","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.addform.short_name,callback:function(e){t.$set(t.addform,"short_name",e)},expression:"addform.short_name"}})],1),a("el-form-item",{attrs:{label:"上级分类","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择分类"},model:{value:t.addform.pid,callback:function(e){t.$set(t.addform,"pid",e)},expression:"addform.pid"}},[a("el-option",{attrs:{label:"顶级分类",value:"0"}}),t._l(t.list,function(t){return a("el-option",{attrs:{value:t.category_id,label:t.category_name}})})],2)],1),a("el-upload",{staticClass:"upload-demo",attrs:{action:t.upfile_url,data:t.upfile_data,"on-success":t.up_ok,limit:1,"file-list":t.upfile_list,headers:t.upfile_head}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addbox=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1)],1)}),n=[],r=a("a49b"),s={name:"Category",props:["list"],data:function(){return{addbox:!1,addform:{category_name:"",short_name:"",pid:"",category_pic:""},formLabelWidth:"120px",upfile_url:r["a"]+"/admin/upload/img",upfile_data:{use:"category"},upfile_head:{token:localStorage.getItem("token")},upfile_list:[]}},methods:{onSubmit:function(){var t=this;this.http.post("/admin/add_category",{form:t.addform}).then(function(e){for(var a in t.$message({showClose:!0,message:"新增成功",type:"success"}),t.addbox=!1,t.addform)t.addform[a]="";t.upfile_list=[],t.$emit("up_parent")})},up_ok:function(t){201==t.code&&(this.addform.category_pic=t.id)}}},d=s,c=(a("d4b3"),a("2877")),u=Object(c["a"])(d,l,n,!1,null,"3af84483",null);u.options.__file="AddCategory.vue";var f=u.exports,p={name:"Category",components:{AddCategory:f},data:function(){return{input:"",category:[],category_top:[],dialogTableVisible:!1,editbox:!1,editform:{category_name:"",short_name:"",pid:"",category_pic:""},formLabelWidth:"120px",editindex:0,upfile_url:r["a"]+"/admin/upload/img",upfile_data:{use:"category"},upfile_head:{token:localStorage.getItem("token")}}},methods:{getCategory:function(){var t=this,e=[];this.http.get("/admin/get_category_all").then(function(a){console.log(t.category);for(var o=0;o<a.data.length;o++)1==a.data[o].level&&e.push(a.data[o]),2==a.data[o].level?a.data[o].line=!0:a.data[o].line=!1;t.category=a.data,t.category_top=e})},del:function(t,e){var a=this,o=this;this.$confirm("是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.http.put("/admin/del_category",{id:t}).then(function(t){return o.$message({showClose:!0,message:"删除成功",type:"success"}),o.category.splice(e,1),!1})})},onedit:function(t){this.editform=this.category[t],this.editindex=t,this.editbox=!0},up_list:function(){this.getCategory()},onSubmit:function(t){var e=this,a=this;this.http.put("/admin/update_category",{form:a.editform}).then(function(o){console.log(o.data),a.editbox=!1,e.category.splice(t,1,o.data)})},onswitch:function(t){this.http.put("/admin/update",{id:t,db:"category",field:"is_visible"}).then(function(t){console.log(t)})},up_ok:function(t){201==t.code&&(this.editform.category_pic=t.id)}},mounted:function(){this.getCategory()}},m=p,b=(a("5b52"),Object(c["a"])(m,o,i,!1,null,"5bdfa692",null));b.options.__file="Category.vue";e["default"]=b.exports},bdd4:function(t,e,a){},d4b3:function(t,e,a){"use strict";var o=a("bdd4"),i=a.n(o);i.a},d4eb:function(t,e,a){}}]);
//# sourceMappingURL=chunk-6deb.ed7f2ce1.js.map