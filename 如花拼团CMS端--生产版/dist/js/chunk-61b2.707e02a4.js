(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61b2"],{1568:function(t,e,i){},3357:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("transition",{attrs:{appear:"","appear-active-class":"animated fadeInLeft"}},[i("div",{staticClass:"article"},[i("div",{staticClass:"list-head"},[i("el-row",[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.dialogFormVisible=!0,t.isedit=!1}}},[t._v("添加文章")]),i("el-dialog",{attrs:{title:"","before-close":t.close_fun,visible:t.dialogFormVisible,width:"50%",center:""},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{attrs:{model:t.form}},[i("el-form-item",{attrs:{label:"类型","label-width":t.formLabelWidth}},[i("el-select",{attrs:{placeholder:"请选择类型"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.options,function(t){return i("el-option",{key:t.value,attrs:{value:t.value,label:t.label}})}))],1),i("el-form-item",{attrs:{label:"文章标题","label-width":t.formLabelWidth}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),i("el-form-item",{attrs:{label:"文章内容","label-width":t.formLabelWidth}},[i("el-input",{attrs:{type:"textarea",rows:"10"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.isedit?i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.sub_edit("form")}}},[t._v("修 改")]):i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.sub("form")}}},[t._v("确 定")])],1)],1)],1)],1),[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[i("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),i("el-table-column",{attrs:{prop:"title",label:"文章标题",width:"400"}}),i("el-table-column",{attrs:{prop:"author",label:"作者",width:"180"}}),i("el-table-column",{attrs:{prop:"create_time",label:"创建时间",width:"280"}}),i("el-table-column",{attrs:{prop:"is_hidden",label:"是否隐藏",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#DCDFE6"},on:{change:function(i){t.onswitch(e.row.id)}},model:{value:e.row.is_hidden,callback:function(i){t.$set(e.row,"is_hidden",i)},expression:"scope.row.is_hidden"}})]}}])}),i("el-table-column",{attrs:{prop:"operation",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"success",size:"small"},on:{click:function(i){t.edit_get(e.row.id)}}},[t._v("修改")]),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"danger",size:"small"},on:{click:function(i){t.del(e.row.id,e.$index)}},slot:"reference"},[t._v("删除")])]}}])}),i("strong")],1)]],2)])],1)},l=[],a=(i("6b54"),i("cadf"),i("551c"),i("097d"),i("5c96")),n={name:"Article",data:function(){return{isedit:!1,dialogFormVisible:!1,options:[{value:0,label:"用户中心"}],oid:0,form:{title:"",content:"",type:""},formLabelWidth:"120px",list:[]}},methods:{sub:function(t){var e=this;this.http.post("/admin/add_article",e.form).then(function(t){e.$message({showClose:!0,message:"添加成功",type:"success"}),e._empty_data(),e.getArticles()})},sub_edit:function(t){var e=this,i=e.form;i["oid"]=e.oid,this.http.put("/admin/edit_article",e.form).then(function(t){e.$message({showClose:!0,message:"修改成功",type:"success"}),e._empty_data(),e.getArticles()})},getArticles:function(){var t=this,e=a["Loading"].service({fullscreen:!0});this.http.get("/newlist",{type:"cms"}).then(function(i){console.log(i.data),e.close();var o=i.status.toString();2==o.charAt(0)&&(t.list=i.data)})},del:function(t,e){var i=this,o=this;this.$confirm("是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.http.put("/admin/del_article",{id:t}).then(function(t){o.$message({showClose:!0,message:"删除成功",type:"success"}),o.list.splice(e,1)})})},onswitch:function(t){this.http.put("/admin/update",{id:t,db:"article",field:"is_hidden"}).then(function(t){console.log(t)})},edit_get:function(t){var e=this;this.http.get("/newlist/"+t).then(function(t){e.form.title=t.data.title,e.form.content=t.data.content,e.form.type=t.data.type,e.isedit=!0,e.oid=t.data.id,e.dialogFormVisible=!0})},close_fun:function(t){this._empty_data(),t()},_empty_data:function(){this.dialogFormVisible=!1,this.form.type="",this.form.title="",this.form.content="",this.oid=0}},mounted:function(){this.getArticles()}},s=n,r=(i("e6a2"),i("2877")),c=Object(r["a"])(s,o,l,!1,null,"697e669e",null);c.options.__file="Article.vue";e["default"]=c.exports},e6a2:function(t,e,i){"use strict";var o=i("1568"),l=i.n(o);l.a}}]);
//# sourceMappingURL=chunk-61b2.707e02a4.js.map