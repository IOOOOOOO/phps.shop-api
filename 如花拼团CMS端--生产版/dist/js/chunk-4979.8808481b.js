(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4979"],{"1be1":function(t,e,i){"use strict";var a=i("b041"),l=i.n(a);l.a},"3bb0":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"ad"}},[i("transition",{attrs:{appear:"","appear-active-class":"animated fadeInLeft"}},[i("div",{staticClass:"list"},[i("div",{staticClass:"list-head"},[i("el-row",[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("添加广告")]),i("el-dialog",{attrs:{title:"",visible:t.dialogFormVisible,width:"45%",center:""},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{attrs:{model:t.form}},[i("el-form-item",{attrs:{label:"广告位名称","label-width":t.formLabelWidth}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.key_word,callback:function(e){t.$set(t.form,"key_word",e)},expression:"form.key_word"}})],1),i("el-form-item",{attrs:{label:"选择广告位","label-width":t.formLabelWidth}},[i("el-select",{model:{value:t.form.banner_id,callback:function(e){t.$set(t.form,"banner_id",e)},expression:"form.banner_id"}},t._l(t.banners,function(t){return i("el-option",{attrs:{value:t.id,label:t.description}})}))],1),i("el-form-item",{attrs:{label:"广告图片","label-width":t.formLabelWidth}},[i("el-upload",{staticClass:"upload-demo",attrs:{action:t.upfile_url,data:t.upfile_data,"on-success":t.up_ok,limit:1,"file-list":t.upfile_list,headers:t.upfile_head}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.sub}},[t._v("确 定")])],1)],1)],1)],1),[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[i("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),i("el-table-column",{attrs:{prop:"key_word",label:"名称",width:"220"}}),i("el-table-column",{attrs:{prop:"banner.description",label:"所属广告位",width:"220"}}),i("el-table-column",{attrs:{prop:"imgs",label:"缩略图",width:"280"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("img",{attrs:{src:t.row.imgs,with:"140",height:"70"}})]}}])}),i("el-table-column",{attrs:{prop:"operation",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"danger",size:"small"},on:{click:function(i){t.del(e.row.id,e.$index)}},slot:"reference"},[t._v("删除")])]}}])})],1)]],2)])],1)},l=[],n=(i("6b54"),i("5c96")),o=i("a49b"),s={name:"Ad",data:function(){return{dialogFormVisible:!1,form:{key_word:"",img_id:"",banner_id:""},formLabelWidth:"120px",input:"",banners:"",upfile_url:o["a"]+"/admin/upload/img",upfile_data:{use:"AD"},upfile_head:{token:localStorage.getItem("token")},upfile_list:[],list:[]}},methods:{sub:function(){var t=this;this.http.post("/admin/create_ad",t.form).then(function(e){for(var i in t.$message({showClose:!0,message:"添加成功",type:"success"}),t.form)t.form[i]="";t.upfile_list=[],t.dialogFormVisible=!1,t.getBannerItems()})},getBanners:function(){var t=this;this.http.get("/banners").then(function(e){console.log(e.data);var i=e.status.toString();2==i.charAt(0)&&(t.banners=e.data)})},getBannerItems:function(){var t=this,e=n["Loading"].service({fullscreen:!0});console.log("xxx"),this.http.get("/banner_all_item").then(function(i){e.close();var a=i.status.toString();2==a.charAt(0)&&(t.list=i.data)})},up_ok:function(t){this.form.img_id=t.id},del:function(t,e){var i=this,a=this;this.$confirm("是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.http.put("/admin/del_ad",{id:t}).then(function(t){a.$message({showClose:!0,message:"删除成功",type:"success"}),a.list.splice(e,1)})})}},mounted:function(){this.getBanners(),this.getBannerItems()}},r=s,d=(i("1be1"),i("2877")),c=Object(d["a"])(r,a,l,!1,null,null,null);c.options.__file="Ad.vue";e["default"]=c.exports},b041:function(t,e,i){}}]);
//# sourceMappingURL=chunk-4979.8808481b.js.map